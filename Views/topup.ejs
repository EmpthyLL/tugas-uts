<div class="bg-gray-200">
  <div class="flex items-center justify-center h-screen w-screen">

    <div id="bar-with-underline-1" role="tabpanel" aria-labelledby="bar-with-underline-item-1"
      class="flex flex-col items-center">
      <div class="h-[280px] w-[500px] border bg-white rounded-xl shadow-md flex justify-center">
        <div class="relative w-[90%] mt-6">

          <div class="flex justify-center items-center space-x-2">
            <span class="text-lg font-extrabold">Rp</span>
            <input type="text" id="amount"
              class="bg-gray-200 h-[25%] w-full pl-7 rounded-xl px-3 border-none focus:ring-lime-500"
              placeholder="Enter amount">
          </div>

          <div class="flex justify-between">
            <button id="first"
              class="border-none rounded-3xl mt-16 bg-gray-300 w-28 text-lg font-bold h-10 text-center flex items-center justify-center focus:outline-none focus:border-lime-500 focus:ring-2 focus:ring-lime-500">
              18.5k
            </button>
            <button id="second"
              class="border-none rounded-3xl mt-16 bg-gray-300 w-28 text-lg font-bold h-10 text-center flex items-center justify-center focus:outline-none focus:border-lime-500 focus:ring-2 focus:ring-lime-500">
              48.5k
            </button>
            <button id="third"
              class="border-none rounded-3xl mt-16 bg-gray-300 w-28 text-lg font-bold h-10 text-center flex items-center justify-center focus:outline-none focus:border-lime-500 focus:ring-2 focus:ring-lime-500">
              98.5k
            </button>
          </div>

          <div class="flex justify-between">
            <button id="fourth"
              class="border-none rounded-3xl mt-10 bg-gray-300 w-28 text-lg font-bold h-10 text-center flex items-center justify-center focus:outline-none focus:border-lime-500 focus:ring-2 focus:ring-lime-500">
              198.5k
            </button>
            <button id="fifth"
              class="border-none rounded-3xl mt-10 bg-gray-300 w-28 text-lg font-bold h-10 text-center flex items-center justify-center focus:outline-none focus:border-lime-500 focus:ring-2 focus:ring-lime-500">
              298.5k
            </button>
            <button id="sixth"
              class="border-none rounded-3xl mt-10 bg-gray-300 w-28 text-lg font-bold h-10 text-center flex items-center justify-center focus:outline-none focus:border-lime-500 focus:ring-2 focus:ring-lime-500">
              498.5k
            </button>
          </div>
        </div>
      </div>

      <div class="flex flex-col items-center justify-center mt-10 bg-white w-[500px]">

        <div class="hs-dropdown relative [--placement:bottom-left] inline-flex">
          <!-- Dropdown Button -->
          <button id="hs-dropdown" type="button"
            class="w-[500px] hs-dropdown-toggle py-4 px-3 inline-flex justify-between items-center gap-x-2 text-sm font-medium rounded-lg border-none border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 focus:outline-none focus:bg-gray-50 dark:bg-neutral-800 dark:border-neutral-700 dark:text-white dark:hover:bg-neutral-700 dark:focus:bg-neutral-700"
            aria-haspopup="menu" aria-expanded="false" aria-label="Dropdown">
            <div class="flex items-center gap-x-2">
              <img id="dropdown-icon" class="w-6 h-6 hidden" src="" alt="Selected Option Icon">
              <span id="dropdown-label">Choose your top up method</span>
            </div>
            <svg class="hs-dropdown-open:rotate-180 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
              viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
              stroke-linejoin="round">
              <path d="m6 9 6 6 6-6"></path>
            </svg>
          </button>

          <!-- Dropdown Menu -->
          <div id="dropdown-menu" class="hs-dropdown-menu hidden bg-white shadow-md rounded-lg mt-2 w-[500px]">
            <div class="p-1 space-y-0.5">
              <a class="flex items-center gap-x-2 py-2 px-3 rounded-lg text-sm text-gray-800 hover:bg-gray-100" href="#"
                onclick="updateDropdownLabel('Indomaret', '/img/topup/indomaret.jpg')">
                <img class="w-12 h-6" src="/img/topup/indomaret.jpg" alt="Indomaret">
                <div>Indomaret</div>
              </a>
              <a class="flex items-center gap-x-2 py-2 px-3 rounded-lg text-sm text-gray-800 hover:bg-gray-100" href="#"
                onclick="updateDropdownLabel('Alfamart', '/img/topup/alfamart.png')">
                <img class="w-12 h-6" src="/img/topup/alfamart.png" alt="Alfamart">
                <div>Alfamart</div>
              </a>
              <a class="flex items-center gap-x-2 py-2 px-3 rounded-lg text-sm text-gray-800 hover:bg-gray-100" href="#"
                onclick="updateDropdownLabel('Alfamidi', '/img/topup/alfamidi.png')">
                <img class="w-12 h-6" src="/img/topup/alfamidi.png" alt="Alfamidi">
                <div>Alfamidi</div>
              </a>
            </div>
          </div>
        </div>

        <button type="button" id="confirm-button"
          class="py-2 px-3 mb-2 inline-flex justify-between items-center w-[450px] gap-x-2 text-lg font-medium rounded-3xl border border-transparent bg-lime-500 text-white hover:bg-lime-600 focus:outline-none focus:bg-lime-700 disabled:opacity-50 disabled:pointer-events-none"
          aria-haspopup="dialog" aria-expanded="false" aria-controls="hs-slide-up-animation-modal" data-hs-overlay="#hs-slide-up-animation-modal">
          <span>Confirm & top up</span>
          <span id="amount-display" class="ml-2"></span>
        </button>
        
        <div id="hs-slide-down-animation-modal" class="hs-overlay hidden size-full fixed top-0 start-0 z-[80] overflow-x-hidden overflow-y-auto pointer-events-none" role="dialog" tabindex="-1" aria-labelledby="hs-slide-down-animation-modal-label">
          <div class="hs-overlay-animation-target hs-overlay-open:mt-7 hs-overlay-open:opacity-100 hs-overlay-open:duration-500 mt-0 opacity-0 ease-out transition-all sm:max-w-lg sm:w-full m-3 sm:mx-auto">
            <div class="flex flex-col bg-white border shadow-sm rounded-xl pointer-events-auto dark:bg-neutral-800 dark:border-neutral-700 dark:shadow-neutral-700/70">
              <div class="flex justify-between items-center py-3 px-4 border-b dark:border-neutral-700">
                <h3 id="hs-slide-down-animation-modal-label" class="font-bold text-gray-800 dark:text-white">
                  Confirm Payment
                </h3>
                <button type="button" class="size-8 inline-flex justify-center items-center gap-x-2 rounded-full border border-transparent bg-gray-100 text-gray-800 hover:bg-gray-200 focus:outline-none focus:bg-gray-200 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-700 dark:hover:bg-neutral-600 dark:text-neutral-400 dark:focus:bg-neutral-600" aria-label="Close" data-hs-overlay="#hs-slide-down-animation-modal">
                  <span class="sr-only">Close</span>
                  <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M18 6 6 18"></path>
                    <path d="m6 6 12 12"></path>
                  </svg>
                </button>
              </div>
              <div class="p-4 overflow-y-auto">
                <p id="topup-message" class="mt-1 text-gray-800 dark:text-neutral-400">
                  Are you sure want to top up Rp 0 with Dropdown?
                </p>
              </div>
              <div class="flex justify-end items-center gap-x-2 py-3 px-4 border-t dark:border-neutral-700">
                <button type="button" class="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 focus:outline-none focus:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-800 dark:border-neutral-700 dark:text-white dark:hover:bg-neutral-700 dark:focus:bg-neutral-700" data-hs-overlay="#hs-slide-down-animation-modal">
                  Cancel
                </button>
                <button id="yes" type="button" class="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-transparent bg-lime-500 text-white hover:bg-lime-600 focus:outline-none focus:bg-lime-700 disabled:opacity-50 disabled:pointer-events-none">
                  Yes
                </button>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>

    <div id="bar-with-underline-2" class="hidden" role="tabpanel" aria-labelledby="bar-with-underline-item-2">
      <p class="text-gray-500 dark:text-neutral-400">
        This is the <em class="font-semibold text-gray-800 dark:text-neutral-200">second</em> item's tab body.
      </p>
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const amount = document.getElementById('amount');
    const amountDisplay = document.getElementById('amount-display');
    const dropdownLabel = document.getElementById("dropdown-label");
    const dropdownIcon = document.getElementById("dropdown-icon");
    const dropdownMenu = document.getElementById("dropdown-menu");
    const confirmButton = document.getElementById("confirm-button");
    const first = document.getElementById('first');
    const second = document.getElementById('second');
    const third = document.getElementById('third');
    const fourth = document.getElementById('fourth');
    const fifth = document.getElementById('fifth');
    const sixth = document.getElementById('sixth');
    const yes = document.getElementById('yes');
    let selectedAmount = 0;
    let selectedStore = "Dropdown";

    function updateButtonAmount() {
        const amountValue = amount.value.replace(/\./g, '');
        selectedAmount = amountValue ? parseInt(amountValue, 10) : 0;
        amountDisplay.textContent = selectedAmount ? `Rp ${selectedAmount.toLocaleString('id-ID')}` : "Rp 0";
        updateTopupMessage();
    }

    amount.addEventListener('input', function () {
        let value = amount.value.replace(/\./g, '');
        if (value) {
            amount.value = parseInt(value, 10).toLocaleString('id-ID');
        }
        updateButtonAmount();
    });

    first.addEventListener('click', function () {
        amount.value = (18500).toLocaleString('id-ID');
        updateButtonAmount();
    });

    second.addEventListener('click', function () {
        amount.value = (48500).toLocaleString('id-ID');
        updateButtonAmount();
    });

    third.addEventListener('click', function () {
        amount.value = (98500).toLocaleString('id-ID');
        updateButtonAmount();
    });

    fourth.addEventListener('click', function () {
        amount.value = (198500).toLocaleString('id-ID');
        updateButtonAmount();
    });

    fifth.addEventListener('click', function () {
        amount.value = (298500).toLocaleString('id-ID');
        updateButtonAmount();
    });

    sixth.addEventListener('click', function () {
        amount.value = (498500).toLocaleString('id-ID');
        updateButtonAmount();
    });

    window.updateDropdownLabel = function (storeName, iconSrc) {
        selectedStore = storeName;
        dropdownLabel.textContent = storeName;
        dropdownIcon.src = iconSrc;
        dropdownIcon.classList.remove("hidden");
        dropdownMenu.classList.add("hidden");
        updateTopupMessage();
    }

    function updateTopupMessage() {
        const message = `Are you sure you want to top up Rp ${selectedAmount.toLocaleString('id-ID')} with ${selectedStore}?`;
        document.getElementById('topup-message').textContent = message;
    }

    document.getElementById("hs-dropdown").addEventListener("click", function () {
        dropdownMenu.classList.toggle("hidden");
    });

    document.addEventListener("click", function (event) {
        const dropdownButton = document.getElementById("hs-dropdown");
        if (!dropdownButton.contains(event.target) && !dropdownMenu.contains(event.target)) {
            dropdownMenu.classList.add("hidden");
        }
    });

    confirmButton.addEventListener('click', function () {
        console.log("Amount: ", selectedAmount);
        console.log("Store: ", selectedStore);
        if (selectedAmount === 0) {
            alert("Harap isi amount terlebih dahulu.");
        } else if (selectedStore === "Dropdown") {
            alert("Harap pilih metode pembayaran terlebih dahulu.");
        } else {
            document.getElementById('hs-slide-up-animation-modal').classList.remove('hidden');
        }
    });
});
</script>